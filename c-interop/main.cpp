#include <stdio.h>
#include "coreruncommon.h"
#include "exports.h"

int main(int argc, char **argv)
{
	int st;
	if ((st = LoadCLRRuntime("/home/user/prog/MessageHeightTwitch/c-interop/a.out", "/home/user/.dotnet/shared/Microsoft.NETCore.App/3.1.0/", "/home/user/prog/MessageHeightTwitch/bin/Debug/netstandard2.1/MessageHeightTwitch.dll")) != 0) {
		printf("failed to load CLR runtime");
		return st;
	}

	if ((st = InitMessageHeightTwitch()) != 0) {
		printf("failed to to init MessageHeightTwitch");
		return st;
	}

	CalculateMessageHeight *c = CreateCalculateMessageHeightDelegate();

	TwitchEmote emotes[3];
	emotes[0].Name = "a";
	emotes[0].Url = "http";
	emotes[1].Name = "pajaDank";
	emotes[1].Url = "https://static-cdn.jtvnw.net/emoticons/v1/129570/1.0";
	emotes[2].Name = "thirdemote";
	emotes[2].Url = "http://test.com/";

	float res = c("ğŸğŸ˜„ğŸ˜ŠğŸ˜ƒâ˜ºğŸ˜‰ğŸ˜ğŸ˜˜ğŸ˜šğŸ˜³ğŸ˜ŒğŸ˜ŒğŸ˜ğŸ˜œğŸ˜ğŸ˜’ğŸ˜’ğŸ˜ğŸ˜ğŸ˜“ğŸ˜”ğŸ˜ğŸ˜–ğŸ˜–ğŸ˜°ğŸ˜¨ğŸ˜£ğŸ˜¢ğŸ˜¢ğŸ˜­ğŸ˜‚ğŸ˜²ğŸ˜±ğŸ’›ğŸ‘½ğŸ‘¿ğŸ‘¿ğŸ˜·ğŸ˜ªğŸ˜¡ğŸ˜ ğŸ’™ğŸ’œğŸ’—ğŸ’šâ¤ğŸ’”ğŸ’“ğŸ’˜ğŸ’¨ğŸ‘âœ¨ğŸ’¦ğŸ‘ŒğŸŒŸğŸ¶ğŸ‘ŠâœŠğŸ’¢ğŸ’¢â•ğŸ”¥âœŒğŸ‘‹ğŸ’©â”ğŸ’¤ğŸ‘âœ‹ğŸ‘â˜ğŸ‘¯ğŸ™†ğŸ™†ğŸ‘†ğŸ‘‡ğŸ’ªğŸ™…ğŸ’ğŸš¶ğŸ‘‰ğŸ‘ˆğŸƒğŸ™‡ğŸ’ğŸ’ğŸ’ƒğŸ™ŒğŸ™ŒğŸ™ğŸ’ƒğŸ’‘ğŸ’†ğŸ‘¶ğŸ‘®ğŸ‘®ğŸ‘¼ğŸ‘µğŸ’‡ğŸ’…ğŸ‘¸ğŸ‘¸ğŸ’‚ğŸ‘±ğŸ‘¦ğŸ‘§ğŸ‘²ğŸ‘²ğŸ’€ğŸ‘£ğŸ‘³ğŸ‘©ğŸ‘¨ğŸ‘·ğŸ‘·ğŸ’‹ğŸ€ğŸŒ´ğŸŒµğŸŒ¹ğŸŒµğŸŒ¾ğŸŒ»ğŸšğŸŒºğŸƒğŸƒğŸ‚ğŸ˜ğŸ™ğŸ™ğŸŒ·ğŸŒ¸ğŸ›ğŸ‘ğŸ«ğŸ§ğŸ§ğŸ’ğŸ”ğŸ”ğŸğŸ¤ğŸ³ğŸŸğŸ¦ğŸ’ğŸµğŸğŸ ğŸŒ€ğŸºğŸ—ğŸ®ğŸ°âš¡ğŸŒ™ğŸ¹ğŸ·ğŸ»ğŸ­â›„â˜ğŸ¶ğŸ¨ğŸ¯â˜”â˜”â˜€ğŸŒŠğŸ¸ğŸğŸ‡ğŸğŸ””ğŸğŸ’ğŸğŸ‘ğŸ‰ğŸˆğŸˆğŸƒğŸ’ğŸ“ğŸ‘»ğŸ’¿ğŸ“€ğŸğŸğŸ†ğŸ„ğŸ“·ğŸ“¼ğŸ”ğŸ”“ğŸ”ŠğŸ’»ğŸ¥ğŸ“ºğŸ“¢ğŸ”’ğŸ”‘ğŸ“£ğŸ“±ğŸ“ ğŸ“»âœ‚ğŸ”¨ğŸ“ â˜â¿ğŸ’¡ğŸ“²ğŸˆğŸˆğŸ€ğŸ“©ğŸ“«ğŸš¬âš½âš¾âš¾ğŸ“®ğŸ›€ğŸ›€ğŸ¾â›³ğŸ’ŠğŸš½ğŸ’ºğŸ’‰ğŸ±ğŸŠğŸ†ğŸ¨ğŸ¤ğŸ‘¾ğŸ„ğŸ¯ğŸ§ğŸ§ğŸºğŸ€„â™ â™¥ğŸ¬ğŸ·ğŸ·ğŸ¸ğŸ“â™£â™¦ğŸ“–ã€½ğŸ‘ŸğŸ‘˜ğŸ’¼ğŸ‘œğŸ‘¡ğŸ‘ ğŸ‘ ğŸ€ğŸ’„ğŸ’ğŸ©ğŸ‘¢ğŸ‘•ğŸ‘‘ğŸ’â˜•â˜•ğŸ‘’ğŸ‘”ğŸ‘—ğŸŒ‚ğŸµğŸºğŸœğŸœğŸ²ğŸ»ğŸ»ğŸ±ğŸğŸğŸ³ğŸ£ğŸ¶ğŸ´ğŸ™ğŸ¢ğŸ¡ğŸ˜ğŸ”ğŸ”ğŸŸğŸšğŸ¦ğŸ§ğŸ†ğŸ…ğŸ‚ğŸ°ğŸğŸŠğŸ‰ğŸ“ğŸŠğŸŒ„ğŸ¢ğŸš—ğŸš—ğŸš¢ğŸŒƒğŸŒƒğŸš•ğŸšŒğŸšŒğŸ—½ğŸ—½âœˆğŸš“ğŸš’ğŸ¡ğŸ¡ğŸš’ğŸš’ğŸš²â›²ğŸŒˆğŸ ğŸ©ğŸ§ğŸ¯ğŸ¨ğŸ«ğŸ’’ğŸ°ğŸ°â›ºâ›ªğŸ£ğŸ¥ğŸ¬ğŸ­ğŸ­ğŸ—¼ğŸŒ‡ğŸ¦ğŸŒ†ğŸ—»ğŸ‡«ğŸ‡·ğŸ‡ªğŸ‡¸ğŸ‡®ğŸ‡¹ğŸ‡·ğŸ‡ºğŸ‡©ğŸ‡ªğŸ‡ºğŸ‡¸ğŸ‡¨ğŸ‡³ğŸ’ˆâ›½ğŸ«ğŸ°ğŸ‡°ğŸ‡·ğŸ‡°ğŸ‡·ğŸ‡¯ğŸ‡µğŸ”°ğŸš„ğŸš‰ğŸš§ğŸŒğŸâš ğŸšƒğŸššğŸš¥â™¨1âƒ£1âƒ£3âƒ£4âƒ£5âƒ£6âƒ£7âƒ£â¬…ğŸˆµğŸˆµğŸˆµğŸˆğŸ†•ğŸ”ğŸ†™ğŸ†’ğŸˆ¹ğŸ‰ğŸˆ³ğŸˆµğŸˆºğŸˆ¯ğŸˆ¯ğŸˆ¶ğŸˆ¶ğŸˆ¶ğŸˆšğŸˆ·ğŸˆ¸ğŸˆ¸ğŸˆ‚ğŸš»ğŸš¹ğŸšºğŸš¼ğŸš­â™¿â™¿âœ³ğŸ”ãŠ—ãŠ™ğŸš¾ğŸš‡âœ´ğŸ’ŸğŸ“´ğŸ’¹ğŸ’¹â™ˆâ™‰â™Šâ™‹â™‹â™Œâ™â™ğŸ”¯â›â™’â™’â™‘â™’â™“â›â›â›â™â™â™Œâ™Šâ™‘ğŸ…°ğŸ…±ğŸ†ğŸ†ğŸ”²ğŸ”²ğŸ”´ğŸ”³ğŸ”³ğŸ•›ğŸ•ğŸ•‘ğŸ•’ğŸ•“ğŸ•”ğŸ••âŒğŸ•šğŸ•˜ğŸ•—ğŸ•–Â©Â®â„¢â­", "tetyys", "TETYYS", 1, emotes, 3);
	printf("res: %f", res);
}
